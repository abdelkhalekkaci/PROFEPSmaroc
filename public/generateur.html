<!DOCTYPE html>
<html lang="fr" dir="ltr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>G√©n√©rateur de fiches EPS | Cr√©ez votre fiche en 2 minutes - Prof EPS</title>
    <meta name="description" content="G√©n√©rez automatiquement des fiches de pr√©paration EPS pour handball, football, gymnastique, athl√©tisme. Conforme aux OP 2007-2009 du Maroc.">
    <meta name="keywords" content="g√©n√©rateur fiche EPS, fiche pr√©paration EPS, handball EPS, football EPS, gymnastique EPS, athl√©tisme EPS Maroc">
    <link rel="icon" type="image/png" href="/images/prof_eps.png">
    <link rel="stylesheet" href="css/style.css">
    
    <style>
        .generator-hero {
            padding: 120px var(--spacing-xl) var(--spacing-xl);
            background: linear-gradient(135deg, rgba(193, 39, 45, 0.05) 0%, rgba(0, 98, 51, 0.05) 100%);
            text-align: center;
        }
        
        .generator-section {
            padding: var(--spacing-2xl) var(--spacing-xl) var(--spacing-3xl);
        }
        
        .generator-container {
            max-width: 1400px;
            margin: 0 auto;
            display: grid;
            grid-template-columns: 400px 1fr;
            gap: var(--spacing-2xl);
            align-items: start;
        }
        
        /* Form Panel */
        .form-panel {
            background: var(--bg-card);
            border-radius: var(--radius-2xl);
            padding: var(--spacing-xl);
            box-shadow: var(--shadow-lg);
            border: 1px solid var(--border-light);
            position: sticky;
            top: 100px;
        }
        
        .form-panel-header {
            text-align: center;
            margin-bottom: var(--spacing-xl);
            padding-bottom: var(--spacing-lg);
            border-bottom: 1px solid var(--border-light);
        }
        
        .form-panel-header h2 {
            font-family: var(--font-display);
            font-size: 1.5rem;
            color: var(--text-primary);
            margin-bottom: var(--spacing-xs);
        }
        
        .form-panel-header p {
            color: var(--text-secondary);
            font-size: 0.9375rem;
        }
        
        .form-section {
            margin-bottom: var(--spacing-lg);
        }
        
        .form-section-title {
            font-size: 0.875rem;
            font-weight: 600;
            color: var(--primary);
            text-transform: uppercase;
            letter-spacing: 0.5px;
            margin-bottom: var(--spacing-md);
            display: flex;
            align-items: center;
            gap: var(--spacing-sm);
        }
        
        .info-fields {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: var(--spacing-sm);
        }
        
        .form-group {
            margin-bottom: var(--spacing-md);
        }
        
        .form-group.full-width {
            grid-column: 1 / -1;
        }
        
        .form-label {
            display: block;
            font-size: 0.875rem;
            font-weight: 500;
            color: var(--text-primary);
            margin-bottom: var(--spacing-xs);
        }
        
        .form-input,
        .form-select,
        .form-textarea {
            width: 100%;
            padding: var(--spacing-sm) var(--spacing-md);
            font-family: var(--font-primary);
            font-size: 0.9375rem;
            color: var(--text-primary);
            background: var(--bg-primary);
            border: 2px solid var(--border);
            border-radius: var(--radius-lg);
            transition: var(--transition);
        }
        
        .form-input:focus,
        .form-select:focus,
        .form-textarea:focus {
            outline: none;
            border-color: var(--primary);
            background: var(--bg-card);
            box-shadow: 0 0 0 4px rgba(193, 39, 45, 0.1);
        }
        
        .form-textarea {
            min-height: 80px;
            resize: vertical;
        }
        
        .generate-btn {
            width: 100%;
            padding: var(--spacing-md) var(--spacing-xl);
            font-size: 1rem;
            font-weight: 600;
            background: linear-gradient(135deg, var(--primary), var(--primary-dark));
            color: white;
            border: none;
            border-radius: var(--radius-lg);
            cursor: pointer;
            transition: var(--transition);
            display: flex;
            align-items: center;
            justify-content: center;
            gap: var(--spacing-sm);
        }
        
        .generate-btn:hover:not(:disabled) {
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(193, 39, 45, 0.4);
        }
        
        .generate-btn:disabled {
            opacity: 0.7;
            cursor: not-allowed;
        }
        
        .generate-btn.loading {
            background: var(--text-light);
        }
        
        /* Result Panel */
        .result-panel {
            background: var(--bg-card);
            border-radius: var(--radius-2xl);
            padding: var(--spacing-xl);
            box-shadow: var(--shadow-lg);
            border: 1px solid var(--border-light);
            min-height: 600px;
        }
        
        .result-header {
            display: flex;
            align-items: center;
            justify-content: space-between;
            margin-bottom: var(--spacing-lg);
            padding-bottom: var(--spacing-lg);
            border-bottom: 1px solid var(--border-light);
        }
        
        .result-title {
            font-family: var(--font-display);
            font-size: 1.25rem;
            color: var(--text-primary);
        }
        
        .result-actions {
            display: flex;
            gap: var(--spacing-sm);
        }
        
        .result-btn {
            padding: var(--spacing-sm) var(--spacing-md);
            font-size: 0.875rem;
            font-weight: 500;
            border-radius: var(--radius);
            transition: var(--transition);
            display: flex;
            align-items: center;
            gap: var(--spacing-xs);
            cursor: pointer;
            border: none;
        }
        
        .result-btn-primary {
            background: var(--secondary);
            color: white;
        }
        
        .result-btn-primary:hover {
            background: var(--secondary-dark);
        }
        
        .result-btn-secondary {
            background: var(--bg-primary);
            color: var(--text-primary);
            border: 1px solid var(--border);
        }
        
        .result-btn-secondary:hover {
            border-color: var(--primary);
            color: var(--primary);
        }
        
        /* Empty State */
        .empty-state {
            text-align: center;
            padding: var(--spacing-3xl) var(--spacing-xl);
        }
        
        .empty-state-icon {
            font-size: 5rem;
            margin-bottom: var(--spacing-lg);
            opacity: 0.5;
        }
        
        .empty-state h3 {
            font-size: 1.5rem;
            color: var(--text-primary);
            margin-bottom: var(--spacing-sm);
        }
        
        .empty-state p {
            color: var(--text-secondary);
            max-width: 400px;
            margin: 0 auto;
        }
        
        /* Fiche Content */
        .fiche-content {
            display: none;
        }
        
        .fiche-content.show {
            display: block;
        }
        
        .fiche-detail {
            line-height: 1.4;
            font-size: 0.875rem;
        }
        
        .fiche-detail h3 {
            color: var(--text-primary);
            font-size: 1.1rem;
            margin-top: var(--spacing-md);
            margin-bottom: var(--spacing-sm);
            padding-bottom: var(--spacing-xs);
            border-bottom: 2px solid var(--primary);
        }
        
        .fiche-detail h4 {
            color: var(--primary);
            font-size: 0.95rem;
            margin-top: var(--spacing-sm);
            margin-bottom: var(--spacing-xs);
        }
        
        .fiche-detail p {
            margin: var(--spacing-xs) 0;
            color: var(--text-secondary);
        }
        
        .fiche-detail ul,
        .fiche-detail ol {
            margin: var(--spacing-xs) 0;
            padding-left: var(--spacing-lg);
        }
        
        .fiche-detail li {
            margin: 2px 0;
            color: var(--text-secondary);
        }
        
        .fiche-detail ul li {
            list-style-type: disc;
        }
        
        .fiche-detail ol li {
            list-style-type: decimal;
        }
        
        .fiche-detail strong {
            color: var(--text-primary);
        }
        
        /* Schema Box */
        .schema-box {
            background: var(--bg-primary);
            border: 2px dashed var(--primary);
            border-radius: var(--radius-lg);
            padding: var(--spacing-lg);
            margin: var(--spacing-lg) 0;
            text-align: center;
        }
        
        .schema-box p {
            color: var(--primary);
            font-style: italic;
        }
        
        /* Videos Section */
        .videos-section {
            margin-top: var(--spacing-xl);
            padding-top: var(--spacing-xl);
            border-top: 1px solid var(--border-light);
        }
        
        .videos-section h3 {
            font-size: 1.125rem;
            color: var(--text-primary);
            margin-bottom: var(--spacing-md);
        }
        
        .video-item {
            display: flex;
            align-items: flex-start;
            gap: var(--spacing-md);
            padding: var(--spacing-md);
            background: var(--bg-primary);
            border-radius: var(--radius-lg);
            margin-bottom: var(--spacing-sm);
        }
        
        .video-icon {
            font-size: 1.5rem;
        }
        
        .video-info h4 {
            font-size: 0.9375rem;
            color: var(--text-primary);
            margin-bottom: var(--spacing-xs);
        }
        
        .video-info p {
            font-size: 0.8125rem;
            color: var(--text-secondary);
        }
        
        /* Loading Overlay */
        .loading-overlay {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0, 0, 0, 0.7);
            z-index: 9999;
            justify-content: center;
            align-items: center;
            flex-direction: column;
        }
        
        .loading-overlay.show {
            display: flex;
        }
        
        .loading-content {
            text-align: center;
            color: white;
        }
        
        .loading-spinner {
            width: 80px;
            height: 80px;
            margin: 0 auto 20px;
            position: relative;
        }
        
        .loading-spinner::before,
        .loading-spinner::after {
            content: '';
            position: absolute;
            border-radius: 50%;
        }
        
        .loading-spinner::before {
            width: 100%;
            height: 100%;
            border: 4px solid transparent;
            border-top-color: #006233;
            border-right-color: #006233;
            animation: spin 1s linear infinite;
        }
        
        .loading-spinner::after {
            width: 60%;
            height: 60%;
            top: 20%;
            left: 20%;
            border: 4px solid transparent;
            border-bottom-color: #c1272d;
            border-left-color: #c1272d;
            animation: spin 0.8s linear infinite reverse;
        }
        
        .loading-text {
            font-size: 1.25rem;
            font-weight: 600;
            margin-bottom: 10px;
        }
        
        .loading-subtext {
            font-size: 0.9rem;
            opacity: 0.8;
        }
        
        .loading-dots::after {
            content: '';
            animation: dots 1.5s infinite;
        }
        
        @keyframes dots {
            0%, 20% { content: '.'; }
            40% { content: '..'; }
            60%, 100% { content: '...'; }
        }
        
        .loading-progress {
            width: 200px;
            height: 4px;
            background: rgba(255,255,255,0.2);
            border-radius: 2px;
            margin: 20px auto 0;
            overflow: hidden;
        }
        
        .loading-progress-bar {
            height: 100%;
            background: linear-gradient(90deg, #c1272d, #006233, #c1272d);
            background-size: 200% 100%;
            animation: progress 2s ease-in-out infinite;
        }
        
        @keyframes progress {
            0% { width: 0%; background-position: 0% 0%; }
            50% { width: 70%; background-position: 100% 0%; }
            100% { width: 100%; background-position: 0% 0%; }
        }
        
        /* Loading Spinner simple pour bouton */
        .spinner {
            width: 20px;
            height: 20px;
            border: 2px solid rgba(255, 255, 255, 0.3);
            border-top-color: white;
            border-radius: 50%;
            animation: spin 0.8s linear infinite;
        }
        
        @keyframes spin {
            to { transform: rotate(360deg); }
        }
        
        /* Responsive */
        @media (max-width: 1024px) {
            .generator-container {
                grid-template-columns: 1fr;
            }
            
            .form-panel {
                position: static;
            }
        }
        
        @media (max-width: 600px) {
            .info-fields {
                grid-template-columns: 1fr;
            }
            
            .result-header {
                flex-direction: column;
                gap: var(--spacing-md);
                align-items: flex-start;
            }
            
            .result-actions {
                width: 100%;
            }
            
            .result-btn {
                flex: 1;
                justify-content: center;
            }
        }
        
        /* Social Icons SVG */
        .footer-social a { display: flex; align-items: center; justify-content: center; width: 40px; height: 40px; background: rgba(255,255,255,0.1); border-radius: 50%; transition: all 0.3s ease; }
        .footer-social a:hover { background: rgba(255,255,255,0.2); transform: scale(1.1); }
        .footer-social svg { width: 20px; height: 20px; fill: white; }
        .social-icon { display: inline-flex; align-items: center; gap: 0.5rem; }
        .social-icon svg { width: 18px; height: 18px; fill: currentColor; }
    </style>
</head>
<body>
    <!-- Loading Overlay -->
    <div class="loading-overlay" id="loadingOverlay">
        <div class="loading-content">
            <div class="loading-spinner"></div>
            <div class="loading-text">G√©n√©ration en cours<span class="loading-dots"></span></div>
            <div class="loading-subtext" id="loadingStatus">Analyse des param√®tres...</div>
            <div class="loading-progress">
                <div class="loading-progress-bar"></div>
            </div>
        </div>
    </div>

    <!-- Navigation -->
    <nav class="navbar" id="navbar">
        <div class="nav-container">
            <a href="index.html" class="nav-logo">
                <img src="/images/prof_eps.png" alt="Prof EPS" style="height: 60px;">
            </a>
            
            <div class="nav-menu" id="navMenu">
                <a href="index.html" class="nav-link">Accueil</a>
                <a href="generateur.html" class="nav-link active">G√©n√©rateur</a>
                <a href="blog.html" class="nav-link">Blog</a>
                <a href="a-propos.html" class="nav-link">√Ä propos</a>
                <a href="contact.html" class="nav-link">Contact</a>
                <a href="generateur.html" class="nav-cta">
                    <span>‚ú®</span> Cr√©er une fiche
                </a>
            </div>
            
            <button class="nav-toggle" id="navToggle" aria-label="Menu">
                <span></span>
                <span></span>
                <span></span>
            </button>
        </div>
    </nav>

    <!-- Hero -->
    <section class="generator-hero">
        <span class="section-badge">‚ú® G√©n√©rateur</span>
        <h1 class="hero-title" style="margin-bottom: var(--spacing-md);">
            Cr√©ez votre <span>fiche EPS</span>
        </h1>
        <p class="hero-description" style="max-width: 700px; margin: 0 auto;">
            Remplissez le formulaire ci-dessous et laissez notre IA g√©n√©rer une fiche p√©dagogique compl√®te et conforme aux Orientations P√©dagogiques.
        </p>
    </section>

    <!-- Generator Section -->
    <section class="generator-section">
        <div class="generator-container">
            <!-- Form Panel -->
            <div class="form-panel">
                <div class="form-panel-header">
                    <h2>üìù Param√®tres</h2>
                    <p>Configurez votre fiche de s√©ance</p>
                </div>
                
                <form id="generateForm">
                    <!-- Informations professeur -->
                    <div class="form-section">
                        <div class="form-section-title">
                            <span>üë§</span> Informations professeur
                        </div>
                        <div class="info-fields">
                            <div class="form-group">
                                <label class="form-label">Nom du professeur</label>
                                <input type="text" class="form-input" id="nomProf" placeholder="M. / Mme...">
                            </div>
                            <div class="form-group">
                                <label class="form-label">√âtablissement</label>
                                <input type="text" class="form-input" id="etablissement" placeholder="Lyc√©e / Coll√®ge...">
                            </div>
                            <div class="form-group full-width">
                                <label class="form-label">Ann√©e scolaire</label>
                                <input type="text" class="form-input" id="anneeScolaire" value="2024-2025">
                            </div>
                        </div>
                    </div>
                    
                    <!-- Param√®tres s√©ance -->
                    <div class="form-section">
                        <div class="form-section-title">
                            <span>‚öôÔ∏è</span> Param√®tres de la s√©ance
                        </div>
                        
                        <div class="form-group">
                            <label class="form-label">Niveau scolaire *</label>
                            <select class="form-select" id="niveau" required>
                                <option value="">-- S√©lectionner --</option>
                                <optgroup label="Coll√®ge (OP 2007)">
                                    <option value="1AC">1√®re Ann√©e Coll√®ge</option>
                                    <option value="2AC">2√®me Ann√©e Coll√®ge</option>
                                    <option value="3AC">3√®me Ann√©e Coll√®ge</option>
                                </optgroup>
                                <optgroup label="Lyc√©e (OP 2009)">
                                    <option value="TC">Tronc Commun</option>
                                    <option value="1AB">1√®re Ann√©e Bac</option>
                                    <option value="2AB">2√®me Ann√©e Bac</option>
                                </optgroup>
                            </select>
                        </div>
                        
                        <div class="form-group">
                            <label class="form-label">Activit√© sportive (APS) *</label>
                            <select class="form-select" id="aps" required>
                                <option value="">-- S√©lectionner --</option>
                                <optgroup label="Sports collectifs">
                                    <option value="Handball">ü§æ Handball</option>
                                    <option value="Football">‚öΩ Football</option>
                                    <option value="Basketball">üèÄ Basketball</option>
                                    <option value="Volleyball">üèê Volleyball</option>
                                </optgroup>
                                <optgroup label="Athl√©tisme">
                                    <option value="Course de vitesse">üèÉ Course de vitesse</option>
                                    <option value="Course de relais">üèÉ‚Äç‚ôÇÔ∏è Course de relais</option>
                                    <option value="Saut en longueur">ü¶ò Saut en longueur</option>
                                    <option value="Saut en hauteur">‚¨ÜÔ∏è Saut en hauteur</option>
                                    <option value="Lancer de poids">üí™ Lancer de poids</option>
                                    <option value="Course de dur√©e">‚è±Ô∏è Course de dur√©e</option>
                                </optgroup>
                                <optgroup label="Gymnastique">
                                    <option value="Gymnastique">ü§∏ Gymnastique au sol</option>
                                </optgroup>
                                <optgroup label="Sports de renvoi">
                                    <option value="Tennis de table">üèì Tennis de table</option>
                                    <option value="Badminton">üè∏ Badminton</option>
                                </optgroup>
                            </select>
                        </div>
                        
                        <div class="form-group">
                            <label class="form-label">Objectif de la s√©ance *</label>
                            <textarea class="form-textarea" id="objectif" required placeholder="Ex: Am√©liorer la capacit√© de l'√©l√®ve √† conserver le ballon et progresser collectivement vers la cible"></textarea>
                        </div>
                        
                        <div class="form-group">
                            <label class="form-label">Num√©ro de la s√©ance</label>
                            <select class="form-select" id="numeroSeance">
                                <option value="1">S√©ance 1</option>
                                <option value="2">S√©ance 2</option>
                                <option value="3">S√©ance 3</option>
                                <option value="4">S√©ance 4</option>
                                <option value="5">S√©ance 5</option>
                                <option value="6">S√©ance 6</option>
                                <option value="7">S√©ance 7</option>
                                <option value="8">S√©ance 8</option>
                                <option value="9">S√©ance 9</option>
                                <option value="10">S√©ance 10</option>
                            </select>
                        </div>
                    </div>
                    
                    <button type="submit" class="generate-btn" id="generateBtn">
                        <span>üöÄ</span>
                        <span>G√©n√©rer la fiche</span>
                    </button>
                </form>
            </div>
            
            <!-- Result Panel -->
            <div class="result-panel">
                <!-- Empty State -->
                <div class="empty-state" id="emptyState">
                    <div class="empty-state-icon">üìã</div>
                    <h3>Votre fiche appara√Ætra ici</h3>
                    <p>Remplissez le formulaire et cliquez sur "G√©n√©rer la fiche" pour cr√©er votre document p√©dagogique.</p>
                </div>
                
                <!-- Fiche Content -->
                <div class="fiche-content" id="ficheContent">
                    <div class="result-header">
                        <h2 class="result-title">üìã Fiche de pr√©paration</h2>
                        <div class="result-actions">
                            <button class="result-btn result-btn-primary" id="downloadBtn" style="display: none;">
                                <span>üì•</span> T√©l√©charger Word
                            </button>
                            <button class="result-btn result-btn-secondary" id="downloadPdfBtn" style="display: none;">
                                <span>üìÑ</span> T√©l√©charger PDF
                            </button>
                        </div>
                    </div>
                    
                    <div class="fiche-detail" id="ficheDetail">
                        <!-- Le contenu sera inject√© ici -->
                    </div>
                    
                    <div class="videos-section" id="videosSection" style="display: none;">
                        <h3>üé• Vid√©os recommand√©es</h3>
                        <div id="videosList"></div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Footer -->
    <footer class="footer">
        <div class="footer-grid">
            <div class="footer-brand">
                <a href="index.html" class="nav-logo">
                    <img src="/images/prof_eps.png" alt="Prof EPS" style="height: 60px; filter: brightness(0) invert(1);">
                </a>
                <p>
                    Le premier g√©n√©rateur intelligent de fiches p√©dagogiques pour les professeurs d'EPS au Maroc.
                </p>
            </div>
            
            <div>
                <h4 class="footer-title">Navigation</h4>
                <div class="footer-links">
                    <a href="index.html">Accueil</a>
                    <a href="generateur.html">G√©n√©rateur</a>
                    <a href="blog.html">Blog</a>
                    <a href="a-propos.html">√Ä propos</a>
                    <a href="contact.html">Contact</a>
                </div>
            </div>
            
            <div>
                <h4 class="footer-title">Ressources</h4>
                <div class="footer-links">
                    <a href="article-op.html">Orientations P√©dagogiques</a>
                    <a href="article-eval.html">√âvaluation en EPS</a>
                    <a href="article-securite.html">S√©curit√© en EPS</a>
                </div>
            </div>
            
            <div>
                <h4 class="footer-title">Contact</h4>
                <div class="footer-links">
                    <a href="mailto:epsprof.assistance@gmail.com" class="social-icon">
                        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 4H4c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2zm0 4l-8 5-8-5V6l8 5 8-5v2z"/></svg>
                        epsprof.assistance@gmail.com
                    </a>
                    <a href="https://www.facebook.com/profepsma" target="_blank" class="social-icon">
                        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M24 12.073c0-6.627-5.373-12-12-12s-12 5.373-12 12c0 5.99 4.388 10.954 10.125 11.854v-8.385H7.078v-3.47h3.047V9.43c0-3.007 1.792-4.669 4.533-4.669 1.312 0 2.686.235 2.686.235v2.953H15.83c-1.491 0-1.956.925-1.956 1.874v2.25h3.328l-.532 3.47h-2.796v8.385C19.612 23.027 24 18.062 24 12.073z"/></svg>
                        Facebook
                    </a>
                    <a href="https://www.instagram.com/profepsma/" target="_blank" class="social-icon">
                        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 2.163c3.204 0 3.584.012 4.85.07 3.252.148 4.771 1.691 4.919 4.919.058 1.265.069 1.645.069 4.849 0 3.205-.012 3.584-.069 4.849-.149 3.225-1.664 4.771-4.919 4.919-1.266.058-1.644.07-4.85.07-3.204 0-3.584-.012-4.849-.07-3.26-.149-4.771-1.699-4.919-4.92-.058-1.265-.07-1.644-.07-4.849 0-3.204.013-3.583.07-4.849.149-3.227 1.664-4.771 4.919-4.919 1.266-.057 1.645-.069 4.849-.069zm0-2.163c-3.259 0-3.667.014-4.947.072-4.358.2-6.78 2.618-6.98 6.98-.059 1.281-.073 1.689-.073 4.948 0 3.259.014 3.668.072 4.948.2 4.358 2.618 6.78 6.98 6.98 1.281.058 1.689.072 4.948.072 3.259 0 3.668-.014 4.948-.072 4.354-.2 6.782-2.618 6.979-6.98.059-1.28.073-1.689.073-4.948 0-3.259-.014-3.667-.072-4.947-.196-4.354-2.617-6.78-6.979-6.98-1.281-.059-1.69-.073-4.949-.073zm0 5.838c-3.403 0-6.162 2.759-6.162 6.162s2.759 6.163 6.162 6.163 6.162-2.759 6.162-6.163c0-3.403-2.759-6.162-6.162-6.162zm0 10.162c-2.209 0-4-1.79-4-4 0-2.209 1.791-4 4-4s4 1.791 4 4c0 2.21-1.791 4-4 4zm6.406-11.845c-.796 0-1.441.645-1.441 1.44s.645 1.44 1.441 1.44c.795 0 1.439-.645 1.439-1.44s-.644-1.44-1.439-1.44z"/></svg>
                        Instagram
                    </a>
                </div>
            </div>
        </div>
        
        <div class="footer-bottom">
            <p class="footer-copyright">
                ¬© 2025 Prof EPS. Tous droits r√©serv√©s.
            </p>
            <div class="footer-social">
                <a href="https://www.facebook.com/profepsma" target="_blank" aria-label="Facebook">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M24 12.073c0-6.627-5.373-12-12-12s-12 5.373-12 12c0 5.99 4.388 10.954 10.125 11.854v-8.385H7.078v-3.47h3.047V9.43c0-3.007 1.792-4.669 4.533-4.669 1.312 0 2.686.235 2.686.235v2.953H15.83c-1.491 0-1.956.925-1.956 1.874v2.25h3.328l-.532 3.47h-2.796v8.385C19.612 23.027 24 18.062 24 12.073z"/></svg>
                </a>
                <a href="https://www.instagram.com/profepsma/" target="_blank" aria-label="Instagram">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 2.163c3.204 0 3.584.012 4.85.07 3.252.148 4.771 1.691 4.919 4.919.058 1.265.069 1.645.069 4.849 0 3.205-.012 3.584-.069 4.849-.149 3.225-1.664 4.771-4.919 4.919-1.266.058-1.644.07-4.85.07-3.204 0-3.584-.012-4.849-.07-3.26-.149-4.771-1.699-4.919-4.92-.058-1.265-.07-1.644-.07-4.849 0-3.204.013-3.583.07-4.849.149-3.227 1.664-4.771 4.919-4.919 1.266-.057 1.645-.069 4.849-.069zm0-2.163c-3.259 0-3.667.014-4.947.072-4.358.2-6.78 2.618-6.98 6.98-.059 1.281-.073 1.689-.073 4.948 0 3.259.014 3.668.072 4.948.2 4.358 2.618 6.78 6.98 6.98 1.281.058 1.689.072 4.948.072 3.259 0 3.668-.014 4.948-.072 4.354-.2 6.782-2.618 6.979-6.98.059-1.28.073-1.689.073-4.948 0-3.259-.014-3.667-.072-4.947-.196-4.354-2.617-6.78-6.979-6.98-1.281-.059-1.69-.073-4.949-.073zm0 5.838c-3.403 0-6.162 2.759-6.162 6.162s2.759 6.163 6.162 6.163 6.162-2.759 6.162-6.163c0-3.403-2.759-6.162-6.162-6.162zm0 10.162c-2.209 0-4-1.79-4-4 0-2.209 1.791-4 4-4s4 1.791 4 4c0 2.21-1.791 4-4 4zm6.406-11.845c-.796 0-1.441.645-1.441 1.44s.645 1.44 1.441 1.44c.795 0 1.439-.645 1.439-1.44s-.644-1.44-1.439-1.44z"/></svg>
                </a>
                <a href="mailto:epsprof.assistance@gmail.com" aria-label="Email">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 4H4c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2zm0 4l-8 5-8-5V6l8 5 8-5v2z"/></svg>
                </a>
            </div>
        </div>
    </footer>

    <script>
        // Configuration API - Utilise l'URL relative pour fonctionner en local et en production
        const API_URL = '';  // Vide = m√™me serveur
        
        // √âl√©ments DOM
        const navbar = document.getElementById('navbar');
        const navToggle = document.getElementById('navToggle');
        const navMenu = document.getElementById('navMenu');
        const generateForm = document.getElementById('generateForm');
        const generateBtn = document.getElementById('generateBtn');
        const emptyState = document.getElementById('emptyState');
        const ficheContent = document.getElementById('ficheContent');
        const ficheDetail = document.getElementById('ficheDetail');
        const downloadBtn = document.getElementById('downloadBtn');
        const videosSection = document.getElementById('videosSection');
        const videosList = document.getElementById('videosList');
        
        // Variables globales
        let currentHtml = null;
        let currentFilename = null;
        
        // Navbar scroll effect
        window.addEventListener('scroll', () => {
            if (window.scrollY > 50) {
                navbar.classList.add('scrolled');
            } else {
                navbar.classList.remove('scrolled');
            }
        });
        
        // Mobile menu toggle
        navToggle.addEventListener('click', () => {
            navMenu.classList.toggle('active');
        });
        
        // Loading overlay
        const loadingOverlay = document.getElementById('loadingOverlay');
        const loadingStatus = document.getElementById('loadingStatus');
        
        const loadingMessages = [
            'Analyse des param√®tres...',
            'Consultation des Orientations P√©dagogiques...',
            'G√©n√©ration des situations d\'apprentissage...',
            'D√©finition des crit√®res de r√©alisation...',
            'D√©finition des crit√®res de r√©ussite...',
            'Mise en forme de la fiche...',
            'Finalisation...'
        ];
        
        function showLoading() {
            loadingOverlay.classList.add('show');
            let messageIndex = 0;
            
            const interval = setInterval(() => {
                if (messageIndex < loadingMessages.length) {
                    loadingStatus.textContent = loadingMessages[messageIndex];
                    messageIndex++;
                }
            }, 2000);
            
            return interval;
        }
        
        function hideLoading(interval) {
            clearInterval(interval);
            loadingOverlay.classList.remove('show');
        }
        
        // Form submission
        generateForm.addEventListener('submit', async (e) => {
            e.preventDefault();
            
            const niveau = document.getElementById('niveau').value;
            const aps = document.getElementById('aps').value;
            const objectif = document.getElementById('objectif').value;
            const numeroSeance = document.getElementById('numeroSeance').value;
            const nomProf = document.getElementById('nomProf').value;
            const etablissement = document.getElementById('etablissement').value;
            const anneeScolaire = document.getElementById('anneeScolaire').value;
            
            if (!niveau || !aps || !objectif) {
                alert('Veuillez remplir tous les champs obligatoires (*)');
                return;
            }
            
            // Loading state
            generateBtn.disabled = true;
            generateBtn.innerHTML = '<div class="spinner"></div><span>G√©n√©ration...</span>';
            generateBtn.classList.add('loading');
            
            // Afficher l'overlay
            const loadingInterval = showLoading();
            
            try {
                console.log('üöÄ Envoi de la requ√™te...');
                const response = await fetch(`${API_URL}/api/generer-fiche`, {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify({
                        niveau,
                        aps,
                        objectif,
                        numeroSeance,
                        nomProf,
                        etablissement,
                        anneeScolaire
                    })
                });
                
                console.log('üì• R√©ponse re√ßue, status:', response.status);
                const data = await response.json();
                console.log('üìã Donn√©es:', data);
                
                // Cacher l'overlay
                hideLoading(loadingInterval);
                
                if (data.success) {
                    console.log('‚úÖ Succ√®s! Affichage de la fiche...');
                    // Afficher le contenu
                    emptyState.style.display = 'none';
                    ficheContent.classList.add('show');
                    
                    // Convertir le markdown basique en HTML
                    let htmlContent = data.ficheDetaillee
                        .replace(/\*\*(.+?)\*\*/g, '<strong>$1</strong>')
                        .replace(/\n/g, '<br>')
                        .replace(/---/g, '<hr>')
                        .replace(/‚Ä¢ /g, '&bull; ');
                    
                    // Injecter le contenu d√©taill√©
                    ficheDetail.innerHTML = htmlContent;
                    console.log('üìù Fiche inject√©e');
                    
                    // Stocker pour t√©l√©chargement
                    currentHtml = data.html;
                    currentFilename = data.filename;
                    
                    // Afficher les boutons de t√©l√©chargement
                    downloadBtn.style.display = 'flex';
                    document.getElementById('downloadPdfBtn').style.display = 'flex';
                    
                    // Afficher les vid√©os si disponibles
                    if (data.videos && data.videos.trim()) {
                        videosSection.style.display = 'block';
                        videosList.innerHTML = formatVideos(data.videos);
                    }
                    
                    // Scroll vers les r√©sultats
                    ficheContent.scrollIntoView({ behavior: 'smooth', block: 'start' });
                } else {
                    throw new Error(data.error || 'Erreur lors de la g√©n√©ration');
                }
            } catch (error) {
                console.error('Erreur:', error);
                hideLoading(loadingInterval);
                alert('Erreur: ' + error.message + '\n\nV√©rifiez que le serveur est d√©marr√© (node server.js)');
            } finally {
                generateBtn.disabled = false;
                generateBtn.innerHTML = '<span>üöÄ</span><span>G√©n√©rer la fiche</span>';
                generateBtn.classList.remove('loading');
            }
        });
        
        // Download Word
        downloadBtn.addEventListener('click', () => {
            if (currentHtml && currentFilename) {
                const blob = new Blob([currentHtml], { type: 'application/msword' });
                const url = URL.createObjectURL(blob);
                const a = document.createElement('a');
                a.href = url;
                a.download = currentFilename;
                document.body.appendChild(a);
                a.click();
                document.body.removeChild(a);
                URL.revokeObjectURL(url);
            }
        });
        
        // Download PDF (utilise print to PDF)
        document.getElementById('downloadPdfBtn').addEventListener('click', () => {
            if (currentHtml) {
                // Ouvrir une nouvelle fen√™tre avec le contenu HTML
                const printWindow = window.open('', '_blank');
                printWindow.document.write(currentHtml);
                printWindow.document.close();
                
                // Attendre le chargement puis imprimer (l'utilisateur peut sauvegarder en PDF)
                printWindow.onload = function() {
                    printWindow.print();
                };
            }
        });
        
        // Format videos
        function formatVideos(videosText) {
            const lines = videosText.split('\n').filter(line => line.trim());
            let html = '';
            
            lines.forEach(line => {
                if (line.includes('-') || line.includes(':')) {
                    html += `
                        <div class="video-item">
                            <div class="video-icon">üé¨</div>
                            <div class="video-info">
                                <h4>${line.split('-')[0] || line}</h4>
                                <p>${line.split('-').slice(1).join